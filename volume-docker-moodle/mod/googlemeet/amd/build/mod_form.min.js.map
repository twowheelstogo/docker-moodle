{"version":3,"sources":["../src/mod_form.js"],"names":["define","notification","str","gapi","init","clientId","apiKey","userTimeZone","discoveryDocs","requiredfield","strcheckweekdays","invalideventendtime","invalideventenddate","timeahead","get_strings","key","component","done","strs","fail","exception","generateUrlRoomButton","document","getElementById","urlFieldHidden","urlViewerField","originalNameFieldHidden","creatorEmailFieldHidden","form","querySelector","getDateString","name","format","formData","FormData","year","get","month","day","slice","checkweekdays","starthour","startminute","endhour","endminute","starttime","endtime","eventdate","eventenddate","daysofweek","start","Date","end","found","i","length","currentday","getDay","formday","setDate","getDate","validate","nameInput","nameError","trim","classList","add","focus","innerText","style","display","remove","eventTimeError","Math","floor","getTime","eventenddateerror","ceil","dayserror","handleCreateEvent","hidePre","auth2","getAuthInstance","signIn","prompt","then","createEvent","catch","showLoading","show","generateurlroomLoading","disabled","formatName","random","appendPre","message","pre","textContent","createTextNode","appendChild","innerHTML","eventstarttime","eventendtime","dateTime","timeZone","recurrence","interval","until","byday","Sun","Mon","Tue","Wed","Thu","Fri","Sat","eventResource","summary","description","client","calendar","events","insert","response","event","result","eventPatch","conferenceData","createRequest","requestId","id","patch","calendarId","eventId","resource","sendNotifications","conferenceDataVersion","value","hangoutLink","creator","email","error","JSON","stringify","load","scope","onclick"],"mappings":"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","sourcesContent":["define([\n  'core/notification',\n  'core/str',\n  'mod_googlemeet/gapi'\n], function(notification, str, gapi) {\n  return {\n    init: function(clientId, apiKey, userTimeZone) {\n      // Array of API discovery doc URLs for APIs used by the quickstart\n      var discoveryDocs = [\"https://www.googleapis.com/discovery/v1/apis/calendar/v3/rest\"];\n\n      // Authorization scopes required by the API\n      var scope = 'https://www.googleapis.com/auth/calendar.events';\n\n      // Load strings\n      var requiredfield = '';\n      var strcheckweekdays = '';\n      var invalideventendtime = '';\n      var invalideventenddate = '';\n      var timeahead = '';\n      str.get_strings([\n        {key: 'requirednamefield', component: 'mod_googlemeet'},\n        {key: 'checkweekdays', component: 'mod_googlemeet'},\n        {key: 'invalideventendtime', component: 'mod_googlemeet'},\n        {key: 'invalideventenddate', component: 'mod_googlemeet'},\n        {key: 'timeahead', component: 'mod_googlemeet'},\n      ]).done(function(strs) {\n        requiredfield = strs[0];\n        strcheckweekdays = strs[1];\n        invalideventendtime = strs[2];\n        invalideventenddate = strs[3];\n        timeahead = strs[4];\n      }).fail(notification.exception);\n\n      // Elements references\n      var generateUrlRoomButton = document.getElementById('id_generateurlroom');\n      var urlFieldHidden = document.getElementById('id_url');\n      var urlViewerField = document.getElementById('id_url_viewer');\n      var originalNameFieldHidden = document.getElementById('id_originalname');\n      var creatorEmailFieldHidden = document.getElementById('id_creatoremail');\n      var form = document.querySelector('#region-main .mform');\n      /**\n       *  Initializes the API client library and sets up sign-in state\n       *  listeners.\n       */\n      function initClient() {\n        gapi.client.init({\n          apiKey: apiKey,\n          clientId: clientId,\n          discoveryDocs: discoveryDocs,\n          scope: scope\n        }).then(function() {\n          generateUrlRoomButton.onclick = handleCreateEvent;\n          generateUrlRoomButton.disabled = false;\n          return;\n        }).catch(function(error) {\n          generateUrlRoomButton.disabled = true;\n          appendPre(JSON.stringify(error, null, 2));\n        });\n      }\n\n      /**\n       * Returns date formatted in yyyy-mm-dd format\n       *\n       * @param {string} name name of date filed in formdata\n       * @param {boolean} format if it is to return the formatted date\n       * @return {string} The formatted date\n       */\n      function getDateString(name, format) {\n        var formData = new FormData(form);\n        var year = formData.get(name + '[year]');\n        var month = formData.get(name + '[month]');\n        var day = formData.get(name + '[day]');\n\n        month = ('0' + month).slice(-2);\n        day = ('0' + day).slice(-2);\n\n        if (format) {\n          return year + '-' + month + '-' + day;\n        }\n\n        return year + month + day;\n      }\n\n      /**\n       * Checks whether the selected day of the week exists within the start and end dates\n       * @return {boolean}\n       */\n      function checkweekdays() {\n        var formData = new FormData(form);\n\n        var starthour = formData.get('starthour');\n        var startminute = formData.get('startminute');\n        var endhour = formData.get('endhour');\n        var endminute = formData.get('endminute');\n\n        starthour = ('0' + starthour).slice(-2);\n        startminute = ('0' + startminute).slice(-2);\n        endhour = ('0' + endhour).slice(-2);\n        endminute = ('0' + endminute).slice(-2);\n\n        var starttime = starthour + ':' + startminute + ':00';\n        var endtime = endhour + ':' + endminute + ':00';\n\n        var eventdate = getDateString('eventdate', true) + ' ' + starttime;\n        var eventenddate = getDateString('eventenddate', true) + ' ' + endtime;\n\n        var daysofweek = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];\n\n        var start = new Date(eventdate);\n        var end = new Date(eventenddate);\n\n        var found = false;\n        while (start <= end) {\n          if (!found) {\n            for (var i = 0; i <= daysofweek.length; i++) {\n              var currentday = daysofweek[start.getDay()];\n              var formday = formData.get('days[' + daysofweek[i] + ']');\n              if (formday && currentday === daysofweek[i]) {\n                found = true;\n                break;\n              }\n            }\n          }\n          start = new Date(start.setDate(start.getDate() + 1));\n        }\n\n        return found;\n      }\n\n      /**\n       * Validates form data\n       * @return {boolean}\n       */\n      function validate() {\n        var valid = true;\n        var formData = new FormData(form);\n\n        // The name is required\n        var nameInput = document.getElementById('id_name');\n        var nameError = document.getElementById('id_error_name');\n        if (formData.get('name').trim().length === 0) {\n          nameInput.classList.add('is-invalid');\n          nameInput.focus();\n          nameError.innerText = '- ' + requiredfield;\n          nameError.style.display = \"block\";\n          return false;\n        } else {\n          nameInput.classList.remove('is-invalid');\n          nameError.innerText = '';\n          nameError.style.display = \"none\";\n        }\n\n        // The end time cannot be less than the start time\n        var eventTimeError = document.getElementById('id_googlemeet_eventtime_error');\n        var starttime = formData.get('starthour') * 3600 + formData.get('startminute') * 60;\n        var endtime = formData.get('endhour') * 3600 + formData.get('endminute') * 60;\n        if (endtime < starttime) {\n          eventTimeError.innerText = invalideventendtime;\n          eventTimeError.style.display = \"block\";\n          document.getElementById('id_endhour').focus();\n          return false;\n        } else {\n          eventTimeError.innerText = '';\n          eventTimeError.style.display = \"none\";\n        }\n\n        // The end date cannot be less than the start date\n        var eventdate = Math.floor(new Date(getDateString('eventdate', true)).getTime() / 1000);\n        var eventenddate = Math.floor(new Date(getDateString('eventenddate', true)).getTime() / 1000);\n        var eventenddateerror = document.getElementById('id_googlemeet_eventenddategroup_error');\n        if (\n          formData.get('addmultiply') &&\n          eventdate !== 0 &&\n          eventenddate !== 0 &&\n          eventenddate < eventdate\n        ) {\n          eventenddateerror.innerText = invalideventenddate;\n          eventenddateerror.style.display = \"block\";\n          document.getElementById('id_eventenddate_day').focus();\n          return false;\n        } else if (\n          // The event period cannot be longer than one year\n          formData.get('addmultiply') &&\n          Math.ceil((eventenddate - eventdate) / 31536000) > 1\n        ) {\n          eventenddateerror.innerText = timeahead;\n          eventenddateerror.style.display = \"block\";\n          document.getElementById('id_eventenddate_day').focus();\n          return false;\n        } else {\n          eventenddateerror.innerText = '';\n          eventenddateerror.style.display = \"none\";\n        }\n\n        // The days of the week must fall within the date range of the event.\n        if (formData.get('addmultiply')) {\n          var dayserror = document.getElementById('id_googlemeet_days_error');\n          if (!checkweekdays()) {\n            dayserror.innerText = strcheckweekdays;\n            dayserror.style.display = \"block\";\n            document.getElementById('id_days_Mon').focus();\n            return false;\n          } else {\n            dayserror.innerText = '';\n            dayserror.style.display = \"none\";\n          }\n        }\n\n        return valid;\n      }\n\n      /**\n       * Initializes the creation of the event in Google Calendar\n       */\n      function handleCreateEvent() {\n        hidePre();\n\n        if (!validate()) {\n          return;\n        }\n\n        gapi.auth2.getAuthInstance().signIn({prompt: 'select_account'}).then(function() {\n          createEvent();\n          return;\n        }).catch();\n      }\n\n      /**\n       * Displays loading\n       *\n       * @param {boolean} show if it is to show loading\n       */\n      function showLoading(show) {\n        var generateurlroomLoading = document.getElementById('generateurlroomLoading');\n\n        if (show) {\n          generateurlroomLoading.style.display = \"block\";\n          generateUrlRoomButton.disabled = true;\n        } else {\n          generateurlroomLoading.style.display = \"none\";\n          generateUrlRoomButton.disabled = false;\n        }\n      }\n\n      /**\n       * Concatenates with name a random number\n       *\n       * @param {string} name\n       * @return {string} The formatted name\n       */\n      function formatName(name) {\n        var random = (Math.floor(Math.random() * (9999 - 1111)) + 1111);\n        return name + ' (' + random + ')';\n      }\n\n      /**\n       * Append a pre-element to the body that contains the message\n       * provided as its text node. Used to display API call errors.\n       *\n       * @param {string} message Text to be placed in pre element.\n       */\n      function appendPre(message) {\n        var pre = document.getElementById('googlemeetcontentlog');\n        var textContent = document.createTextNode(message + '\\n');\n        pre.style.display = \"block\";\n        pre.appendChild(textContent);\n      }\n\n      /**\n       * Hide the pre tag\n       */\n      function hidePre() {\n        var pre = document.getElementById('googlemeetcontentlog');\n        pre.style.display = \"none\";\n        pre.innerHTML = \"\";\n      }\n\n      /**\n       * Creates the event on Google Calendar\n       */\n      function createEvent() {\n        var formData = new FormData(form);\n\n        var starthour = formData.get('starthour');\n        var startminute = formData.get('startminute');\n        var endhour = formData.get('endhour');\n        var endminute = formData.get('endminute');\n\n        starthour = ('0' + starthour).slice(-2);\n        startminute = ('0' + startminute).slice(-2);\n        endhour = ('0' + endhour).slice(-2);\n        endminute = ('0' + endminute).slice(-2);\n\n        var eventstarttime = starthour + ':' + startminute + ':00';\n        var eventendtime = endhour + ':' + endminute + ':00';\n\n        var start = {\n          dateTime: getDateString('eventdate', true) + 'T' + eventstarttime,\n          timeZone: userTimeZone\n        };\n\n        var end = {\n          dateTime: getDateString('eventdate', true) + 'T' + eventendtime,\n          timeZone: userTimeZone\n        };\n\n        var recurrence = [];\n\n        if (formData.get('addmultiply')) {\n          var interval = 'INTERVAL=' + formData.get('period');\n          var until = 'UNTIL=' + getDateString('eventenddate', false) + 'T235959Z';\n          var byday = 'BYDAY=';\n\n          var daysofweek = {\n            Sun: 'SU',\n            Mon: 'MO',\n            Tue: 'TU',\n            Wed: 'WE',\n            Thu: 'TH',\n            Fri: 'FR',\n            Sat: 'SA'\n          };\n\n          for (var day in daysofweek) {\n            if (formData.get('days[' + day + ']')) {\n              byday += daysofweek[day] + ',';\n            }\n          }\n\n          recurrence = [\n            'RRULE:FREQ=WEEKLY;' + interval + ';' + until + ';' + byday\n          ];\n        }\n\n        var name = formatName(formData.get('name'));\n        var eventResource = {\n          summary: name,\n          description: formData.get('introeditor[text]'),\n          start: start,\n          end: end,\n          recurrence: recurrence\n        };\n\n        showLoading(true);\n\n        gapi.client.calendar.events.insert({\n          'calendarId': 'primary',\n          'resource': eventResource\n        }).then(function(response) {\n          var event = response.result;\n\n          var eventPatch = {\n            conferenceData: {\n              createRequest: {requestId: event.id}\n            }\n          };\n\n          gapi.client.calendar.events.patch({\n            calendarId: \"primary\",\n            eventId: event.id,\n            resource: eventPatch,\n            sendNotifications: false,\n            conferenceDataVersion: 1\n          }).then(function(response) {\n            var event = response.result;\n\n            generateUrlRoomButton.remove();\n            originalNameFieldHidden.value = name;\n            urlFieldHidden.value = event.hangoutLink;\n            urlViewerField.value = event.hangoutLink;\n            creatorEmailFieldHidden.value = event.creator.email;\n\n            document.getElementById('id_googlemeet_generateurlgroup_error').style.display = 'none';\n\n            showLoading(false);\n            return;\n          }).catch(function(error) {\n            appendPre(JSON.stringify(error.result.error, null, 2));\n            showLoading(false);\n          });\n          return;\n        }).catch(function(error) {\n          appendPre(JSON.stringify(error.result.error, null, 2));\n          showLoading(false);\n        });\n      }\n\n      /**\n       *  On load, called to load the auth2 library and API client library.\n       */\n      gapi.load('client:auth2', initClient);\n    }\n  };\n});\n"],"file":"mod_form.min.js"}